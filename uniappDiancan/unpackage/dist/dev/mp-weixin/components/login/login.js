(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/login/login"],{761:function(e,n,t){"use strict";t.r(n);var o=t(762),i=t(764);for(var r in i)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(r);t(766);var s,c=t(42),u=Object(c["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],s);u.options.__file="components/login/login.vue",n["default"]=u.exports},762:function(e,n,t){"use strict";t.r(n);var o=t(763);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},763:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return i})),t.d(n,"staticRenderFns",(function(){return s})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return o}));try{o={uPopup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(t.bind(null,811))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,752))},uDivider:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-divider/u-divider")]).then(t.bind(null,1197))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,n=e.$createElement,t=(e._self._c,e.cell.length),o=e.code.length;e._isMounted||(e.e0=function(n){e.usershow=!1},e.e1=function(n){e.usershow=!1}),e.$mp.data=Object.assign({},{$root:{g0:t,g1:o}})},r=!1,s=[];i._withStripped=!0},764:function(e,n,t){"use strict";t.r(n);var o=t(765),i=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=i.a},765:function(e,n,t){"use strict";(function(e){var o=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(t(30)),r=o(t(32)),s=t(33),c=t(39),u=o(t(38)),a=(t(44),{props:["show"],name:"login",data:function(){return{loginavatar:"",usershow:!1,cell:"",time:60,code:"",select:!1,getuserinfo:{},logincode:"",common:null,login_name:"",login_url:null}},mounted:function(){var n=this;u.default.loginApi().then((function(e){n.logincode=e.code}));e.getStorageSync("userinfo");this.commonApi()},methods:{wxlogin:function(){var n=this;return(0,r.default)(i.default.mark((function t(){var o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(o=n,n.login_name){t.next=3;break}return t.abrupt("return",n.showToast("请输入昵称"));case 3:if(n.loginavatar){t.next=5;break}return t.abrupt("return",n.showToast("请上传头像"));case 5:e.login({success:function(t){(0,s.wx_login)({code:t.code,username:n.login_name,avatar:n.login_url}).then((function(t){1==t.code&&(n.$store.commit("setislogin",!0),e.setStorageSync("userinfo",t.data.userinfo),o.userInfoApi(),o.getopenid(),o.usershow=!1)}))}});case 6:case"end":return t.stop()}}),t)})))()},change:function(e){this.login_name=e.detail.value},setimg:function(e){var n=this,t=e.detail.avatarUrl;this.uploadimage(t).then((function(e){n.loginavatar=e.fullurl,n.login_url=e.url}))},loginClick:function(){this.select?(this.usershow=!0,this.close()):e.showToast({title:"请勾选用户协议",icon:"none"})},commonApi:function(){var n=this;return(0,r.default)(i.default.mark((function t(){var o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,c.common)();case 2:o=t.sent,1==o.code&&(n.common=o.data,e.setStorageSync("public",o.data),n.public=Object.assign({},e.getStorageSync("public")),e.getStorageSync("user")||e.setStorageSync("user",o.data),n.userall=Object.assign({},e.getStorageSync("user")),n.display=!0);case 4:case"end":return t.stop()}}),t)})))()},close:function(){this.$emit("closepage")},timeevent:function(){var e=this;this.sendApi();var n=setInterval((function(){e.time--,e.time||(e.time=60,clearTimeout(n))}),1e3)},selectevent:function(){this.select=!this.select},sendApi:function(){var n=this;return(0,r.default)(i.default.mark((function t(){var o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.send)({mobile:n.cell});case 2:o=t.sent,1==o.code||e.showToast({title:o.msg,icon:"none"});case 4:case"end":return t.stop()}}),t)})))()},getopenid:function(){e.login({success:function(n){(0,s.get_openid)({code:n.code}).then((function(n){1==n.code&&e.setStorageSync("openid",n.data.openid)}))},fail:function(e){console.log("eerr",e)}})},checkApi:function(){var n=this;return(0,r.default)(i.default.mark((function t(){var o;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n.select){t.next=7;break}return t.next=3,(0,s.check)({mobile:n.cell,captcha:n.code});case 3:o=t.sent,1==o.code?(n.$store.commit("setislogin",!0),e.setStorageSync("userinfo",o.data.userinfo),n.$emit("closepage"),n.userInfoApi(),n.commonApi(),n.getopenid()):e.showToast({title:o.msg,icon:"none"}),t.next=8;break;case 7:e.showToast({title:"请勾选用户协议",icon:"none"});case 8:case"end":return t.stop()}}),t)})))()},userInfoApi:function(){var n=this;return(0,r.default)(i.default.mark((function t(){var o,r;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o=n,t.next=3,(0,c.userInfo)();case 3:r=t.sent,1==r.code?(e.setStorageSync("user",r.data),n.$emit("closepage"),e.showToast({title:r.msg,icon:"none",duration:1e3,success:function(){var e=getCurrentPages(),n=e[e.length-1];n.onLoad(n.options),n.onShow(),n.onReady(),o.commonApi()}})):e.showToast({title:r.msg,icon:"none"});case 5:case"end":return t.stop()}}),t)})))()},getphonenumber:function(n){var t=this,o=this;"getPhoneNumber:fail user deny"!=n.detail.errMsg&&(this.select?(this.getuserinfo=n.detail,this.getuserinfo.code=this.logincode,this.getuserinfo.iv=encodeURIComponent(this.getuserinfo.iv),this.getuserinfo.encryptedData=encodeURIComponent(this.getuserinfo.encryptedData),(0,s.login)(this.getuserinfo).then((function(n){1==n.code?(e.setStorageSync("userinfo",n.data.userinfo),t.$emit("closepage"),o.userInfoApi(),o.getopenid()):e.showToast({title:n.msg,icon:"none"})}))):e.showToast({title:"请勾选用户协议",icon:"none"}))}}});n.default=a}).call(this,t(2)["default"])},766:function(e,n,t){"use strict";t.r(n);var o=t(767),i=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=i.a},767:function(e,n,t){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/login/login.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/login/login-create-component',
    {
        'components/login/login-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(761))
        })
    },
    [['components/login/login-create-component']]
]);
