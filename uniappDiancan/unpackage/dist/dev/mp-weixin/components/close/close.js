(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/close/close"],{819:function(e,t,n){"use strict";n.r(t);var o=n(820),r=n(822);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);n(824);var a,s=n(42),c=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],a);c.options.__file="components/close/close.vue",t["default"]=c.exports},820:function(e,t,n){"use strict";n.r(t);var o=n(821);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},821:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return r})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return o}));try{o={uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,811))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,752))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,796))},uNumberBox:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-number-box/u-number-box")]).then(n.bind(null,1126))},specificationCard:function(){return n.e("components/specificationCard/specificationCard").then(n.bind(null,1255))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,t=e.$createElement,n=(e._self._c,!e.shopping_trolley_list.data||0==e.shopping_trolley_list.data.length);e._isMounted||(e.e0=function(t){e.show=!0},e.e1=function(t){e.show=!1},e.e2=function(t){e.specificationShow=!1}),e.$mp.data=Object.assign({},{$root:{g0:n}})},i=!1,a=[];r._withStripped=!0},822:function(e,t,n){"use strict";n.r(t);var o=n(823),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},823:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(30)),i=o(n(32)),a=o(n(35)),s=n(180),c={name:"close",props:{shopping_trolley_list:{},seatShow:{type:Boolean},addAdish:{default:!1},pb:{default:"10rpx"}},computed:{Httpimg:function(){return a.default.HttpImg}},data:function(){return{show:!1,value:[],trolley_list:{},capsule_button:2,tableNumber:e.getStorageSync("tableNumber")||!1,specificationShow:!1,order_id:"",order_type:"",editList:[],cart_id:""}},watch:{shopping_trolley_list:function(e,t){console.log(this.shopping_trolley_list),this.trolley_list=e,this.inputlenght()}},methods:{gojs:function(e){this.tableNumber?(console.log(1),this.gotable(e)):(console.log(2),this.goback(e))},carList:function(){this.$emit("update"),this.specificationShow=!1},specification:function(e){var t=this;if(e.item_name){if(this.show=!1,this.order_id=e.goods_id,this.cart_id=e.id,this.order_type=e.type,2==e.type){var n=e.item_id.split("_");this.editList=n}else this.editList=e.spu_info_ys;setTimeout((function(){t.specificationShow=!0,t.$refs.specificationCard.specification()}),500)}},jiacai:function(t){var n=this;return(0,i.default)(r.default.mark((function o(){var i,a,c,u;return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(!t){o.next=7;break}return i=e.getStorageSync("orderId"),o.next=4,(0,s.jiac)({id:i,c_type:t||1});case 4:return a=o.sent,1==a.code&&(n.tableNumber?(e.setStorageSync("tableNumber",!1),e.setStorageSync("option",1),e.reLaunch({url:"/pages/merchant/order/order"})):e.reLaunch({url:"/pages/order_form/order_form"})),o.abrupt("return");case 7:if(!(n.shopping_trolley_list.count>0)){o.next=15;break}return c=e.getStorageSync("orderId"),o.next=11,(0,s.jiac)({id:c,c_type:t||1});case 11:u=o.sent,1==u.code&&(n.tableNumber?(e.setStorageSync("tableNumber",!1),e.setStorageSync("option",1),e.reLaunch({url:"/pages/merchant/order/order"})):e.reLaunch({url:"/pages/order_form/order_form"})),o.next=16;break;case 15:e.showToast({title:"请添加菜品",icon:"none"});case 16:case"end":return o.stop()}}),o)})))()},inputlenght:function(){var e=this;this.value=[],this.trolley_list.data&&this.trolley_list.data.forEach((function(t,n){e.value.push(t.count)}))},reduce:function(t,n,o){if(1==t.is_cw){if(o>1){var r=o-1;e.setStorageSync("peopleCount",r),this.$emit("update")}}else this.order_reduce(t,t.spu_info_ys)},add:function(t,n,o){if(1==t.is_cw){var r=o-0+1;e.setStorageSync("peopleCount",r),this.$emit("update")}else this.add_joinCar(t,t.spu_info_ys)},valChange:function(e){},add_joinCar:function(t,n){var o=this;return(0,i.default)(r.default.mark((function i(){var a;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.getStorageSync("scene"),r.next=3,(0,s.order_joinCar)({store_id:t.store_id,goods_id:t.goods_id,spu_id:t.item_id,count:1,spu_info:n,seat_id:a});case 3:r.sent,o.$emit("update");case 5:case"end":return r.stop()}}),i)})))()},order_reduce:function(e,t){var n=this;return(0,i.default)(r.default.mark((function o(){return r.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,s.order_reduce)({store_id:e.store_id,goods_id:e.goods_id,spu_id:e.item_id,count:1,spu_info:t,cart_id:e.id});case 2:o.sent,n.$emit("update");case 4:case"end":return o.stop()}}),o)})))()},remove:function(){var e=this;return(0,i.default)(r.default.mark((function t(){return r.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,s.order_empty)();case 2:t.sent,e.$emit("update"),e.show=!1;case 5:case"end":return t.stop()}}),t)})))()},gotable:function(t){t?e.navigateTo({url:"/pages/merchant/tableNumber/tableNumber?ctype=2"}):this.shopping_trolley_list.count>0?1==this.shopping_trolley_list.data[0].is_cw?e.showToast({title:"请至少选择一个商品",icon:"none"}):e.navigateTo({url:"/pages/merchant/tableNumber/tableNumber"}):e.showToast({title:"请至少选择一个商品",icon:"none"})},goback:function(t){var n=e.getStorageSync("user"),o=e.getStorageSync("peopleCount")||0;if(1==n.order_num)e.showModal({title:"提示",content:"你有未支付订单,请支付过后重新提交",success:function(t){t.confirm?e.reLaunch({url:"/pages/order_form/order_form"}):t.cancel}});else{if(t){var r;if(this.seatShow)r="/pages/order_all/affirm_order/affirm_order?ctype=2"+"&peopleCount=".concat(o);else{var i=e.getStorageSync("firstPay");r=1==i?"/pages/order_all/affirm_order/affirm_order?ctype=2"+"&peopleCount=".concat(o):"/pages/scan/peopleOrder/peopleOrder?ctype=2"+"&peopleCount=".concat(o)}return e.getStorageSync("userinfo")?void e.navigateTo({url:r}):void this.$emit("register")}if(this.shopping_trolley_list.count>0)if(1==this.shopping_trolley_list.data[0].is_cw)e.showToast({title:"请至少选择一个商品",icon:"none"});else{var a;if(this.seatShow)a=t?"/pages/order_all/affirm_order/affirm_order?ctype=2"+"&peopleCount=".concat(o):"/pages/order_all/affirm_order/affirm_order"+"?peopleCount=".concat(o);else{var s=e.getStorageSync("firstPay");a=1==s?t?"/pages/order_all/affirm_order/affirm_order?ctype=2"+"&peopleCount=".concat(o):"/pages/order_all/affirm_order/affirm_order"+"?peopleCount=".concat(o):"/pages/scan/peopleOrder/peopleOrder"+"?peopleCount=".concat(o)}if(!e.getStorageSync("userinfo"))return void this.$emit("register");this.shopping_trolley_list.count>0?e.navigateTo({url:a}):e.showToast({title:"无商品可结算",icon:"none"})}else console.log("进入了"),e.showToast({title:"请至少选择一个商品",icon:"none"})}}}};t.default=c}).call(this,n(2)["default"])},824:function(e,t,n){"use strict";n.r(t);var o=n(825),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=r.a},825:function(e,t,n){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/close/close.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/close/close-create-component',
    {
        'components/close/close-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(819))
        })
    },
    [['components/close/close-create-component']]
]);
