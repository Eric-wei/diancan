(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/specification/specification"],{826:function(e,n,t){"use strict";t.r(n);var o=t(827),i=t(829);for(var r in i)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(r);t(831);var c,u=t(42),s=Object(u["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],c);s.options.__file="components/specification/specification.vue",n["default"]=s.exports},827:function(e,n,t){"use strict";t.r(n);var o=t(828);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},828:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return i})),t.d(n,"staticRenderFns",(function(){return c})),t.d(n,"recyclableRender",(function(){return r})),t.d(n,"components",(function(){return o}));try{o={uPopup:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(t.bind(null,811))},height:function(){return t.e("components/height/height").then(t.bind(null,768))},uNumberBox:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-number-box/u-number-box")]).then(t.bind(null,1126))},uIcon:function(){return Promise.all([t.e("common/vendor"),t.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(t.bind(null,752))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.close(),e.style=[]})},r=!1,c=[];i._withStripped=!0},829:function(e,n,t){"use strict";t.r(n);var o=t(830),i=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=i.a},830:function(e,n,t){"use strict";(function(e){var o=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(t(30)),r=o(t(18)),c=o(t(32)),u=t(180),s={name:"specification",props:["specshow","order_id","store_id","activate_data","type"],data:function(){return{orderprive:"",style:[],specification_list:[],spu_info:[],count:0,localSpecShow:this.specshow}},watch:{specshow:function(e){this.localSpecShow=e},orderprive:function(e,n){var t=this;this.count=0,this.spu_info.forEach((function(e){t.count=t.count+e.count}))}},methods:{focus:function(e){var n;this.specification_list.forEach((function(t){t.item.forEach((function(t){t.id==e.name&&(n=t.name)}))})),this.spu_info.length>0?this.spu_info.forEach((function(n){n.spu_id==e.name&&(n.count=e.value)})):this.spu_info.push({spu_id:e.name,count:e.value,name:n}),this.$forceUpdate(),this.store_itemPriceApi()},selective_specification:function(e,n,t){var o=this;return(0,c.default)(i.default.mark((function r(){return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:o.$set(o.style[e],"id",n),o.$set(o.style[e],"name",t),o.store_itemPriceApi();case 3:case"end":return i.stop()}}),r)})))()},specification:function(e){var n=this;return(0,c.default)(i.default.mark((function e(){var t,o;return i.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.specification_list=[],e.next=3,(0,u.store_item)({goods_id:n.order_id});case 3:t=e.sent,1==t.code&&(n.style=[],n.spu_info=[],2==n.type?t.data.forEach((function(e){n.style.push({id:e.item[0].id,name:e.item[0].name})})):t.data.forEach((function(e){e.item.forEach((function(e){e.value=0,n.spu_info.push({spu_id:e.id,count:0,name:e.name})}))})),(o=n.specification_list).push.apply(o,(0,r.default)(t.data)),n.store_itemPriceApi());case 5:case"end":return e.stop()}}),e)})))()},store_itemPriceApi:function(){var e=this;return(0,c.default)(i.default.mark((function n(){var t,o,r,c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t="",o=[],2==e.type?(e.style.forEach((function(e,n){t+=e.id+"_"})),t=t.substring(0,t.length-1)):e.spu_info.forEach((function(e){e.count>0&&o.push({count:e.count,spu_id:e.spu_id})})),n.next=5,(0,u.store_itemPrice)({goods_id:e.order_id,spu_id:t,spu_info:o});case 5:r=n.sent,1==r.code&&(c=r.data.price,e.orderprive=c);case 7:case"end":return n.stop()}}),n)})))()},add_joinCar:function(){var n=this;return(0,c.default)(i.default.mark((function t(){var o,r,c,s,a;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.getStorageSync("userinfo")){t.next=5;break}return n.localSpecShow=!1,n.$emit("close"),n.$emit("login"),t.abrupt("return");case 5:if(o="",r=[],2!=n.type){t.next=11;break}n.style.forEach((function(e,t){t==n.style.length-1?o+=e.id:o+=e.id+"_"})),t.next=18;break;case 11:if(!(n.specification_list.length>0)){t.next=17;break}if(console.log(n.spu_info),c=n.spu_info.every((function(e){return 0==e.count})),!c){t.next=17;break}return e.showToast({title:"请添加规格",icon:"none"}),t.abrupt("return");case 17:n.spu_info.forEach((function(e){e.count>0&&r.push({count:e.count,spu_id:e.spu_id})}));case 18:return s=e.getStorageSync("scene"),t.next=21,(0,u.order_joinCar)({store_id:n.store_id,goods_id:n.order_id,spu_id:o,count:1,order_type:n.activate_data,spu_info:r,seat_id:s});case 21:a=t.sent,1==a.code?(setTimeout((function(){n.$emit("order")}),500),e.showToast({title:a.msg,icon:"none"}),n.spu_info=[],n.style=[],n.close()):e.showToast({title:a.msg,icon:"none"});case 23:case"end":return t.stop()}}),t)})))()},close:function(){this.spu_info=[],this.style=[],this.$emit("close")}}};n.default=s}).call(this,t(2)["default"])},831:function(e,n,t){"use strict";t.r(n);var o=t(832),i=t.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(r);n["default"]=i.a},832:function(e,n,t){}}]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/components/specification/specification.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/specification/specification-create-component',
    {
        'components/specification/specification-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(826))
        })
    },
    [['components/specification/specification-create-component']]
]);
