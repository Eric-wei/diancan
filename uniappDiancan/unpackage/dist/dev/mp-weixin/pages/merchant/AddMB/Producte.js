(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/merchant/AddMB/Producte"],{513:function(t,e,s){"use strict";(function(t,e){var i=s(4);s(26);i(s(25));var n=i(s(514));t.__webpack_require_UNI_MP_PLUGIN__=s,e(n.default)}).call(this,s(1)["default"],s(2)["createPage"])},514:function(t,e,s){"use strict";s.r(e);var i=s(515),n=s(517);for(var o in n)["default"].indexOf(o)<0&&function(t){s.d(e,t,(function(){return n[t]}))}(o);s(519);var c,u=s(42),a=Object(u["default"])(n["default"],i["render"],i["staticRenderFns"],!1,null,"766f374d",null,!1,i["components"],c);a.options.__file="pages/merchant/AddMB/Producte.vue",e["default"]=a.exports},515:function(t,e,s){"use strict";s.r(e);var i=s(516);s.d(e,"render",(function(){return i["render"]})),s.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),s.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),s.d(e,"components",(function(){return i["components"]}))},516:function(t,e,s){"use strict";var i;s.r(e),s.d(e,"render",(function(){return n})),s.d(e,"staticRenderFns",(function(){return c})),s.d(e,"recyclableRender",(function(){return o})),s.d(e,"components",(function(){return i}));try{i={uUpload:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-upload/u-upload")]).then(s.bind(null,1056))},uIcon:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(s.bind(null,752))},uRadioGroup:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-radio-group/u-radio-group")]).then(s.bind(null,1014))},uRadio:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-radio/u-radio")]).then(s.bind(null,1022))},uniTable:function(){return s.e("uni_modules/uni-table/components/uni-table/uni-table").then(s.bind(null,1066))},uniTr:function(){return s.e("uni_modules/uni-table/components/uni-tr/uni-tr").then(s.bind(null,1073))},uniTh:function(){return s.e("uni_modules/uni-table/components/uni-th/uni-th").then(s.bind(null,1080))},uniTd:function(){return s.e("uni_modules/uni-table/components/uni-td/uni-td").then(s.bind(null,1087))},uSwitch:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-switch/u-switch")]).then(s.bind(null,1006))},uParse:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-parse/u-parse")]).then(s.bind(null,943))},uPopup:function(){return Promise.all([s.e("common/vendor"),s.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(s.bind(null,811))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var n=function(){var t=this,e=t.$createElement,s=(t._self._c,t.title.length),i=JSON.stringify(t.classObj),n=t.GGlistObj.length,o=t.GGlistObj.length;t._isMounted||(t.e0=function(e){t.classshow=!0},t.e1=function(e){t.show=!1},t.e2=function(e){t.show=!1},t.e3=function(e){t.classshow=!1},t.e4=function(e){t.classshow=!1}),t.$mp.data=Object.assign({},{$root:{g0:s,g1:i,g2:n,g3:o}})},o=!1,c=[];n._withStripped=!0},517:function(t,e,s){"use strict";s.r(e);var i=s(518),n=s.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},518:function(t,e,s){"use strict";(function(t){var i=s(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(s(30)),o=i(s(18)),c=i(s(32)),u=i(s(11)),a=i(s(35)),r=s(44),l=s(33);function h(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function d(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?h(Object(s),!0).forEach((function(e){(0,u.default)(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):h(Object(s)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var p=function(){s.e("components/GGList/List").then(function(){return resolve(s(1094))}.bind(null,s)).catch(s.oe)},f=function(){s.e("components/classList/List").then(function(){return resolve(s(1103))}.bind(null,s)).catch(s.oe)},m={data:function(){return{issuccess:!1,classshow:!1,classObj:{},price:"",line_price:"",stock:"",Httpimg:a.default.uploadImgUrl,isexist:!0,show:!1,classList:[],GGlist:[],chhoseGGobj:{},GGlistObj:[],spu:[],title:"",desc:"",fileList1:[],fileList2:[],tagt:"",tags:[],radiolist1:[{name:"自取",disabled:!1,type:1},{name:"外卖",disabled:!1,type:2},{name:"均可",disabled:!1,type:3}],shipment:3,editId:"",goodsDetail:"",skuType:[{name:"无属性单规格",type:1},{name:"单规格",type:2},{name:"多规格",type:3}],skuVal:2}},onLoad:function(t){"{}"!=JSON.stringify(t)&&(this.editId=t.id,this.getgoodsDetail())},onUnload:function(){this.$store.commit("setproducteDetail","")},onShow:function(){this.goodsCategorys()},computed:d(d({},(0,r.mapState)(["producteDetail"])),{},{shopuser:function(){return t.getStorageSync("shopuser")}}),components:{GGList:p,classList:f},methods:{titleinp:function(t){t.detail.cursor<30?this.title=t.detail.value:this.title=this.title.substring(0,30),console.log(this.title)},getgoodsDetail:function(){var t=this;(0,l.goodsDetail)({goods_id:this.editId}).then((function(e){if(1==e.code){if(t.goodsDetail=e.data,t.title=e.data.title||"",t.desc=e.data.desc||"",t.tags=e.data.tags||"",t.shipment=1*e.data.shipment,e.data.image&&t.fileList1.push({url:e.data.image}),e.data.images){var s=e.data.images.split(",");s.forEach((function(e){t.fileList2.push({url:e.includes("http")?e:t.Httpimg+e})}))}t.$set(t.chhoseGGobj,"type",e.data.type),t.$set(t.chhoseGGobj,"spu",e.data.spu),t.$set(t.chhoseGGobj,"id",e.data.template_id),t.$set(t.chhoseGGobj,"name",e.data.template_name),t.$set(t.classObj,"name",e.data.type_name),0==t.chhoseGGobj.spu.length?(t.GGlistObj={},t.spu=[],t.isexist=!1,t.price=e.data.price,t.line_price=e.data.line_price,t.stock=e.data.stock,t.skuVal=1):1==e.data.type?t.skuVal=2:t.skuVal=3,t.$set(t.classObj,"id",e.data.type_id),t.GGlistObj=e.data.sku,t.$store.commit("setproducteDetail",e.data.json)}}))},goodsCategorys:function(){var t=this;(0,l.goodsCategory)({store_id:this.shopuser.id,type:"normal"}).then((function(e){1==e.code&&(t.classList=e.data)}))},save:function(){var e=this;if(!this.issuccess){var s=null;if(this.fileList1.length)if("{}"!=JSON.stringify(this.classObj)){var i=[],n=[];if(this.fileList1.forEach((function(t){i.push(t.url)})),this.fileList2.forEach((function(t){n.push(t.url)})),this.fileList2.length){if(1==this.skuVal){if(!this.price)return void t.showToast({title:"请输入价格",icon:"none"});if(!this.line_price)return void t.showToast({title:"请输入划线价",icon:"none"});if(!this.stock)return void t.showToast({title:"请输入库存",icon:"none"});if(1*this.line_price<1*this.price)return void t.showToast({title:"划线价必须大于商品价",icon:"none"})}else if("{}"==JSON.stringify(this.chhoseGGobj)||0==this.chhoseGGobj.id)return void t.showToast({title:"请选择规格",icon:"none"});this.title?(s=1==this.chhoseGGobj.type?this.isexist?{store_id:this.shopuser.id,type_id:this.classObj.id,title:this.title,desc:this.desc,json:this.producteDetail,type:this.chhoseGGobj.type,price:this.price,line_price:this.line_price,stock:this.stock,image:i[0],images:n,tags:this.tags,spu:this.chhoseGGobj.spu,sku:this.GGlistObj,template_id:this.chhoseGGobj.id,shipment:this.shipment}:{store_id:this.shopuser.id,type_id:this.classObj.id,title:this.title,desc:this.desc,json:this.producteDetail,type:this.chhoseGGobj.type,price:this.price,line_price:this.line_price,stock:this.stock,image:i[0],images:n,tags:this.tags,spu:[],sku:[],template_id:this.chhoseGGobj.id,shipment:this.shipment}:{store_id:this.shopuser.id,type_id:this.classObj.id,title:this.title,desc:this.desc,json:this.producteDetail,type:this.chhoseGGobj.type,price:this.price,line_price:this.line_price,stock:this.stock,image:i[0],images:n,tags:this.tags,spu:this.chhoseGGobj.spu,sku:this.GGlistObj,template_id:this.chhoseGGobj.id,shipment:this.shipment},this.editId&&(s.id=this.editId),(0,l.goodsAdd)(s).then((function(s){1==s.code?(t.showLoading(),t.showToast({title:s.msg,icon:"none"}),e.issuccess=!0,setTimeout((function(){t.navigateBack(),t.hideLoading()}),500)):(t.hideToast(),t.showModal({title:"提示",content:s.msg})),console.log(s,"属性")}))):t.showToast({title:"请选填写名称",icon:"none"})}else t.showToast({title:"请上传图片",icon:"none"})}else t.showToast({title:"请选择商品分类",icon:"none"});else t.showToast({title:"请上传图片",icon:"none"})}},ChooseImg:function(e){var s=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(t){s.uploadFilePromise(t.tempFiles[0].path).then((function(t){e.image=t.fullurl,console.log(t,"换图")}))}})},classnewuse:function(t){this.classshow=!1,this.classObj=t},newuse:function(t){this.show=!1,this.chhoseGGobj=t,console.log(this.chhoseGGobj),this.chhoseGGobj.spu.length?this.chhoseGGobj.sku&&(this.isexist=!0,this.GGlistObj=JSON.parse(JSON.stringify(this.chhoseGGobj.sku)),this.spu=this.chhoseGGobj.spu):(this.GGlistObj={},this.spu=[],this.isexist=!1)},getlist:function(t){var e=this;return(0,c.default)(n.default.mark((function s(){var i,c,u,a,r;return n.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return i="",2==e.skuVal&&(i=1),3==e.skuVal&&(i=2),s.next=5,(0,l.skuTemplateList)({store_id:e.shopuser.id,type:i});case 5:c=s.sent,u=c.code,a=c.data,c.msg,1==u&&(t?(r=e.GGlist).push.apply(r,(0,o.default)(a)):e.GGlist=a),console.log("列表",a);case 11:case"end":return s.stop()}}),s)})))()},groupChange:function(t){console.log("groupChange",t)},radioChange:function(t){console.log("radioChange",t)},gopage:function(e){this.show=!1,t.navigateTo({url:e})},addTTT:function(e){this.tagt?(this.tags.push(this.tagt),this.tagt=""):t.showToast({title:"请输入标签~",icon:"none"})},delTTT:function(t){this.tags[t]&&this.tags.splice(t,1)},deletePic:function(t){this["fileList".concat(t.name)].splice(t.index,1)},afterRead:function(t){var e=this;return(0,c.default)(n.default.mark((function s(){var i,o,c,u,a;return n.default.wrap((function(s){while(1)switch(s.prev=s.next){case 0:i=[].concat(t.file),o=e["fileList".concat(t.name)].length,i.map((function(s){e["fileList".concat(t.name)].push(d(d({},s),{},{status:"uploading",message:"上传中"}))})),c=0;case 4:if(!(c<i.length)){s.next=14;break}return s.next=7,e.uploadFilePromise(i[c].url);case 7:u=s.sent,a=e["fileList".concat(t.name)][o],e["fileList".concat(t.name)].splice(o,1,Object.assign(a,{status:"success",message:"",url:u.fullurl})),o++;case 11:c++,s.next=4;break;case 14:case"end":return s.stop()}}),s)})))()},uploadFilePromise:function(e){return new Promise((function(s,i){t.uploadFile({url:a.default.serverHost+"//addons/fzdc/common/upload",filePath:e,name:"file",header:{token:t.getStorageSync("userinfo").token},success:function(t){setTimeout((function(){s(JSON.parse(t.data).data)}),1e3)}})}))},skuChange:function(t){1==t?(this.isexist=!1,this.$set(this.chhoseGGobj,"type",1),this.$set(this.chhoseGGobj,"spu",[]),this.$set(this.chhoseGGobj,"id",0),this.$set(this.chhoseGGobj,"name",""),this.GGlistObj=[]):(this.isexist=!0,this.price="",this.line_price="",this.stock="")},openTemplate:function(){this.show=!0,this.getlist()}}};e.default=m}).call(this,s(2)["default"])},519:function(t,e,s){"use strict";s.r(e);var i=s(520),n=s.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){s.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},520:function(t,e,s){}},[[513,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/merchant/AddMB/Producte.js.map