require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order_all/selectstore/selectstore"],{689:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var a=o(n(690));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n(1)["default"],n(2)["createPage"])},690:function(e,t,n){"use strict";n.r(t);var o=n(691),a=n(693);for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n(696);var i,s=n(42),c=Object(s["default"])(a["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],i);c.options.__file="pages/order_all/selectstore/selectstore.vue",t["default"]=c.exports},691:function(e,t,n){"use strict";n.r(t);var o=n(692);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},692:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return i})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));try{o={uSearch:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-search/u-search")]).then(n.bind(null,773))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,752))},uLoadingIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-loading-icon/u-loading-icon")]).then(n.bind(null,1030))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,796))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var e=this,t=e.$createElement,n=(e._self._c,e.shoplist.length<1&&!e.loading);e._isMounted||(e.e0=function(t){e.index_select=0,e.store_listApi()},e.e1=function(t){e.index_select=1,e.store_listApi()}),e.$mp.data=Object.assign({},{$root:{g0:n}})},r=!1,i=[];a._withStripped=!0},693:function(e,t,n){"use strict";n.r(t);var o=n(694),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},694:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(n(30)),r=o(n(18)),i=o(n(32)),s=o(n(35)),c=(o(n(695)),n(180)),l=o(n(38)),u=(n(36),{data:function(){return{loading:!1,search:"",list1:[{name:"附近门店",index:0},{name:"常去/收藏",index:1}],Httpimg:s.default.HttpImg,index_select:0,mapshow:0,title:"百度地图",latitude:34.7586,longitude:113.672307,covers:[],shoplist:[],location:{},locationname:"",page:1}},onLoad:function(){this.store_listApi();var t=e.getStorageSync("location");this.latitude=t.latitude,this.longitude=t.longitude,this.location=e.getStorageSync("location")},computed:{shop:function(){return e.getStorageSync("shop")}},methods:{searchall:function(){this.store_listApi()},store_collectionApi:function(t,n,o,r){var s=this;return(0,i.default)(a.default.mark((function r(){return a.default.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.getStorageSync("userinfo")){a.next=6;break}return s.enter=!0,e.showToast({title:"未登录",icon:"none"}),a.abrupt("return");case 6:if(!n&&1!=s.index_select){a.next=13;break}return a.next=9,(0,c.store_cancelColl)({store_id:t.id});case 9:a.sent,a.next=17;break;case 13:return a.next=15,(0,c.store_collection)({store_id:t.id});case 15:a.sent;case 17:1==s.index_select?s.shoplist.splice(o,1):t.is_collection=n?0:1;case 18:case"end":return a.stop()}}),r)})))()},tabclick:function(e){this.index_select=e.index,this.store_listApi(),console.log(e)},init:function(){var e=this,t=[{id:1,name:"雷军",imgUrl:"../../static/Project_drawing 1.png",lat:"34.7586",lng:"113.672307"},{id:2,name:"李彦宏",imgUrl:"../../static/Project_drawing 2.png",lat:"34.763466",lng:"113.686285"},{id:3,name:"马化腾",imgUrl:"../../static/Project_drawing 3.png",lat:"34.763412",lng:"113.680185"}];e.MapData(e,t)},MapData:function(e,t){for(var n=[],o=0;o<t.length;o++)n.push({id:t[o].id,latitude:t[o].lat,longitude:t[o].lng,title:t[o].name,iconPath:t[o].imgUrl,width:60,height:60,callout:{content:t[o].name,color:"",fontSize:16,borderRadius:20,bgColor:"",padding:6,display:"BYCLICK",textAlign:"left"},label:{content:"",color:"#ff6600",fontSize:16,x:0,y:0,borderWidth:1,borderColor:"",borderRadius:10,bgColor:"red",padding:6,textAlign:"left"},anchor:{x:.5,y:1}});e.covers=n},markertap:function(e){},tap:function(t){e.showToast({title:"选中附近位置",icon:"success"}),e.setStorageSync("location",t.detail),this.store_listApi()},updated:function(e){},mapdisplay:function(){this.mapshow?this.mapshow=0:this.mapshow=1},store_listApi:function(){var e=this;return(0,i.default)(a.default.mark((function t(){var n,o,i,s,u,d,f,p,h;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e,0!=e.index_select){t.next=13;break}return t.next=4,(0,c.store_list)({page:1,limit:10,search:e.search});case 4:if(f=t.sent,e.shoplist=[],e.locationname=f.data.address,null!==f&&void 0!==f&&null!==(o=f.data)&&void 0!==o&&null!==(i=o.rows)&&void 0!==i&&i.length){t.next=9;break}return t.abrupt("return");case 9:null===f||void 0===f||null===(s=f.data)||void 0===s||null===(u=s.rows)||void 0===u||u.forEach((function(e){e.distance=l.default.mkm(e.distance)})),(d=e.shoplist).push.apply(d,(0,r.default)(f.data.rows)),t.next=18;break;case 13:return t.next=15,(0,c.store_collectionList)({page:1,limit:10,search:e.search});case 15:p=t.sent,e.shoplist=[],p.data&&(p.data.rows.forEach((function(e){e.distance=l.default.mkm(e.distance)})),e.locationname=p.data.address,(h=e.shoplist).push.apply(h,(0,r.default)(p.data.rows)));case 18:setTimeout((function(){n.loading=!1}),500);case 19:case"end":return t.stop()}}),t)})))()},store_collectionListApi:function(){return(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,(0,c.store_collectionList)({page:"",limit:""});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})))()},position_selection:function(){var t=this;return(0,i.default)(a.default.mark((function n(){var o;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,l.default.getchooseLocation();case 2:o=n.sent,e.setStorageSync("location",o),t.store_listApi();case 5:case"end":return n.stop()}}),n)})))()},goplace:function(t,n){e.setStorageSync("shop",t),1==n?((0,c.order_empty)(),e.reLaunch({url:"/pages/order/order"})):e.reLaunch({url:"/pages/reserved/reserved"})},store_listApi_down:function(){var e=this;return(0,i.default)(a.default.mark((function t(){var n,o,i,s;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.index_select){t.next=9;break}return t.next=3,(0,c.store_list)({page:e.page,limit:10,search:""});case 3:o=t.sent,o.data.rows.forEach((function(e){e.distance=l.default.mkm(e.distance)})),e.locationname=o.data.address,(n=e.shoplist).push.apply(n,(0,r.default)(o.data.rows)),t.next=13;break;case 9:return t.next=11,(0,c.store_collectionList)({page:e.page,limit:10,search:""});case 11:i=t.sent,i.data&&(i.data.rows.forEach((function(e){e.distance=l.default.mkm(e.distance)})),e.locationname=i.data.address,(s=e.shoplist).push.apply(s,(0,r.default)(i.data.rows)));case 13:case"end":return t.stop()}}),t)})))()}},onReachBottom:function(){this.page++,this.store_listApi_down()}});t.default=u}).call(this,n(2)["default"])},696:function(e,t,n){"use strict";n.r(t);var o=n(697),a=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=a.a},697:function(e,t,n){}},[[689,"common/runtime","common/vendor","pages/order_all/common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/order_all/selectstore/selectstore.js.map