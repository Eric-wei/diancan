require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/order_all/goodsordersearch/goodsordersearch"],{708:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26);o(n(25));var i=o(n(709));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},709:function(e,t,n){"use strict";n.r(t);var o=n(710),i=n(712);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n(714),n(716);var s,u=n(42),c=Object(u["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,"13b70db2",null,!1,o["components"],s);c.options.__file="pages/order_all/goodsordersearch/goodsordersearch.vue",t["default"]=c.exports},710:function(e,t,n){"use strict";n.r(t);var o=n(711);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},711:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));try{o={uSwiper:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-swiper/u-swiper")]).then(n.bind(null,744))},uNumberBox:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-number-box/u-number-box")]).then(n.bind(null,1126))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,752))},uParse:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-parse/u-parse")]).then(n.bind(null,943))},height:function(){return n.e("components/height/height").then(n.bind(null,768))},close:function(){return n.e("components/close/close").then(n.bind(null,819))},specification:function(){return n.e("components/specification/specification").then(n.bind(null,826))},login:function(){return Promise.all([n.e("common/vendor"),n.e("components/login/login")]).then(n.bind(null,761))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,t=e.$createElement,n=(e._self._c,(1*e.orderprive).toFixed(2)),o=2==e.order_type?e.funjointext(e.style):null;e._isMounted||(e.e0=function(t){e.isexpand=!e.isexpand},e.e1=function(t){e.contentlist.sku_count>0?e.select(1):e.add_joinCar(1)},e.e2=function(t){e.show_specification=!1},e.e3=function(t){e.enter=!0},e.e4=function(t){e.enter=!1}),e.$mp.data=Object.assign({},{$root:{g0:n,m0:o}})},r=!1,s=[];i._withStripped=!0},712:function(e,t,n){"use strict";n.r(t);var o=n(713),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},713:function(e,t,n){"use strict";(function(e){var o=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=o(n(30)),r=o(n(18)),s=o(n(32)),u=o(n(11)),c=o(n(35)),a=n(180),d=(o(n(38)),n(33),{data:function(){var e;return e={Httpimg:c.default.HttpImg,counts:1,isexpand:!1,enter:!1,addAdish:!1,list1:[],store_id:"",orderid:"",contentlist:{},show_specification:!1,specification_list:[],order_id:"",style:[],orderprive:0,shopping_trolley_list:[],display:!1,register:!1,activate_data:"",seatShow:!0},(0,u.default)(e,"addAdish",!1),(0,u.default)(e,"order_type",""),(0,u.default)(e,"spu_info",[]),e},onLoad:function(t){this.order_id=t.id,this.store_id=t.store_id,this.activate_data=t.activate_data,this.store_goodsDetailApi(t.id);var n=e.getStorageSync("addAdish"),o=e.getStorageSync("option");3==o&&(this.seatShow=!1,n&&(this.addAdish=n)),e.getStorageSync("userinfo")&&this.order_carListApi()},computed:{shopid:function(){return e.getStorageSync("shop")},public:function(){return e.getStorageSync("public")}},watch:{orderprive:function(e,t){var n=this;this.count=1,this.spu_info.forEach((function(e){n.count=n.count+e.count}))}},methods:{instantlyPay:function(){var e=this;this.contentlist.sku_count>0?this.select(2):this.add_joinCar(2),setTimeout((function(){e.addAdish?e.$refs.shoppingcar.jiacai(2):e.$refs.shoppingcar.gojs(2)}),300)},changeCounts:function(e){"del"==e?(this.counts--,this.counts<=0&&(this.counts=1)):this.counts++,this.store_itemPriceApi()},focus:function(e){var t;this.specification_list.forEach((function(n){n.item.forEach((function(n){n.id==e.name&&(t=n.name)}))})),this.spu_info.length>0?this.spu_info.forEach((function(t){t.spu_id==e.name&&(t.count=e.value)})):this.spu_info.push({spu_id:e.name,count:e.value,name:t}),this.$forceUpdate(),this.store_itemPriceApi()},funjointext:function(e){var t=null;if(e&&e.length){var n=e.map((function(e){return e.name}));t=n.join("、")}return t},store_goodsDetailApi:function(t){var n=this;return(0,s.default)(i.default.mark((function o(){var s,u;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,(0,a.store_goodsDetail)({goods_id:t});case 2:s=o.sent,1==s.code&&(n.list1=[],(u=n.list1).push.apply(u,(0,r.default)(s.data.images)),n.contentlist=s.data,n.display=!0,n.order_type=s.data.type,e.setNavigationBarTitle({title:n.contentlist.title}),n.store_itemApi(t));case 4:case"end":return o.stop()}}),o)})))()},store_itemApi:function(e){var t=this;return(0,s.default)(i.default.mark((function n(){var o,s;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,(0,a.store_item)({goods_id:e});case 2:s=n.sent,t.style=[],t.spu_info=[],2==t.order_type?s.data.forEach((function(e){t.style.push({id:e.item[0].id,name:e.item[0].name})})):s.data.forEach((function(e){e.item.forEach((function(e){e.value=0,t.spu_info.push({spu_id:e.id,count:0,name:e.name})}))})),t.specification_list=[],(o=t.specification_list).push.apply(o,(0,r.default)(s.data)),t.store_itemPriceApi();case 9:case"end":return n.stop()}}),n)})))()},selective_specification:function(e,t,n){var o=this;return(0,s.default)(i.default.mark((function r(){return i.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:o.$set(o.style[e],"id",t),o.$set(o.style[e],"name",n),o.store_itemPriceApi();case 3:case"end":return i.stop()}}),r)})))()},store_itemPriceApi:function(){var e=this;return(0,s.default)(i.default.mark((function t(){var n,o,r,s,u;return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e,console.log(n.counts,"总数量"),o="",r=[],2==e.order_type?(e.style.forEach((function(e,t){o+=e.id+"_"})),o=o.substring(0,o.length-1)):n.spu_info.forEach((function(e){e.count>0&&r.push({count:e.count,spu_id:e.spu_id})})),t.next=7,(0,a.store_itemPrice)({goods_id:n.order_id,spu_id:o,spu_info:r,count:n.counts});case 7:s=t.sent,1==s.code&&(u=s.data.price,n.orderprive=u);case 9:case"end":return t.stop()}}),t)})))()},add_joinCar:function(t){var n=this;return(0,s.default)(i.default.mark((function o(){var r,s;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(e.getStorageSync("userinfo")){o.next=3;break}return n.enter=!0,o.abrupt("return");case 3:return r="",n.style.forEach((function(e){r+=e.id+"_"})),r=r.substring(0,r.length-1),o.next=8,(0,a.order_joinCar)({store_id:n.store_id,goods_id:n.order_id,spu_id:r,count:n.counts,order_type:n.activate_data,c_type:t||1});case 8:s=o.sent,1==s.code?(e.showToast({title:s.msg,icon:"none",duration:3e3}),n.order_carListApi(),n.show_specification=!1):e.showToast({title:s.msg,icon:"error"});case 10:case"end":return o.stop()}}),o)})))()},order_carListApi:function(){var t=this;return(0,s.default)(i.default.mark((function n(){var o,r,s;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=e.getStorageSync("peopleCount")||0,r=t.addAdish?2:1,n.next=4,(0,a.order_carList)({peopleCount:o,type:r,store_id:t.shopid});case 4:s=n.sent,t.shopping_trolley_list=s.data;case 6:case"end":return n.stop()}}),n)})))()},select:function(t){var n=this;return(0,s.default)(i.default.mark((function o(){var r,s,u;return i.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(console.log("类型"),e.getStorageSync("userinfo")){o.next=4;break}return n.enter=!0,o.abrupt("return");case 4:return r="",s=[],2==n.order_type?n.style.forEach((function(e,t){t==n.style.length-1?r+=e.id:r+=e.id+"_"})):n.spu_info.forEach((function(e){e.count>0&&s.push({count:e.count,spu_id:e.spu_id})})),o.next=9,(0,a.order_joinCar)({store_id:n.store_id,goods_id:n.order_id,spu_id:r,count:n.counts,order_type:n.activate_data,spu_info:s,c_type:t||1});case 9:u=o.sent,1==u.code?(setTimeout((function(){n.$emit("order")}),500),e.showToast({title:u.msg,icon:"none"})):e.showToast({title:u.msg,icon:"none"});case 11:case"end":return o.stop()}}),o)})))()},reg:function(){if(!e.getStorageSync("userinfo"))return this.register=!0,void e.showToast({title:"未登录",icon:"none"});this.show_specification=!0},closepage:function(){this.register=!1}}});t.default=d}).call(this,n(2)["default"])},714:function(e,t,n){"use strict";n.r(t);var o=n(715),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},715:function(e,t,n){},716:function(e,t,n){"use strict";n.r(t);var o=n(717),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},717:function(e,t,n){}},[[708,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/order_all/goodsordersearch/goodsordersearch.js.map