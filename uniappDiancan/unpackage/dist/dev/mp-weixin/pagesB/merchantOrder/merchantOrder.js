require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagesB/merchantOrder/merchantOrder"],{289:function(e,t,n){"use strict";(function(e,t){var r=n(4);n(26);r(n(25));var o=r(n(290));e.__webpack_require_UNI_MP_PLUGIN__=n,t(o.default)}).call(this,n(1)["default"],n(2)["createPage"])},290:function(e,t,n){"use strict";n.r(t);var r=n(291),o=n(293);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(295),n(297);var s,a=n(42),c=Object(a["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,"7484ee0c",null,!1,r["components"],s);c.options.__file="pagesB/merchantOrder/merchantOrder.vue",t["default"]=c.exports},291:function(e,t,n){"use strict";n.r(t);var r=n(292);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},292:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return s})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return r}));try{r={orderlist:function(){return n.e("components/orderlist/orderlist").then(n.bind(null,789))},uEmpty:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-empty/u-empty")]).then(n.bind(null,796))},ordercard:function(){return n.e("components/ordercard/ordercard").then(n.bind(null,804))},height:function(){return n.e("components/height/height").then(n.bind(null,768))},uPopup:function(){return Promise.all([n.e("common/vendor"),n.e("node-modules/uview-ui/components/u-popup/u-popup")]).then(n.bind(null,811))},close:function(){return n.e("components/close/close").then(n.bind(null,819))},specification:function(){return n.e("components/specification/specification").then(n.bind(null,826))},login:function(){return Promise.all([n.e("common/vendor"),n.e("components/login/login")]).then(n.bind(null,761))}}}catch(a){if(-1===a.message.indexOf("Cannot find module")||-1===a.message.indexOf(".vue"))throw a;console.error(a.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.orderlist.length);e._isMounted||(e.e0=function(t){e.show_specification=!1},e.e1=function(t){e.enter=!0}),e.$mp.data=Object.assign({},{$root:{g0:n}})},i=!1,s=[];o._withStripped=!0},293:function(e,t,n){"use strict";n.r(t);var r=n(294),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},294:function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(30)),i=r(n(18)),s=r(n(32)),a=r(n(38)),c=n(180),u=(n(36),n(192)),d=n(39),l={data:function(){return{addshow:!0,popshow:!1,activate_data:1,show_specification:!1,counp_show:!0,list1:"",list1url:"",childindex:0,store_default_data:{},store_infoApi_data:[],orderlist:[],store_id:"",specification_list:[],order_id:"",style:[],orderprive:0,shopping_trolley_list:{},display:!1,enter:!1,System_height:(0,u.cellphone)(),components_index:0,scene:null,seatShow:!0,peopleCur:0,peopleCount:1,people:"",addAdish:!1,option:null,order_type:null}},computed:{shopuser:function(){return e.getStorageSync("shopuser")}},onLoad:function(e){this.getlocation(),this.store_defaultApi(1),this.remove()},onShow:function(){e.getStorageSync("peopleCount")||(console.log("就餐人数"),this.popshow=!0);var t=e.getStorageSync("userinfo"),n=(e.getStorageSync("addAdish"),e.getStorageSync("option")),r=e.getStorageSync("scene");e.getStorageSync("firstPay");this.addAdish=e.getStorageSync("addAdish"),this.option=n,t&&this.getUser(),3==n?this.seatShow=!1:(r&&(e.removeStorageSync("scene"),e.removeStorageSync("peopleCount")),this.seatShow=!0,this.addAdish=!1),this.enter=!1,this.order_carListApi()},methods:{remove:function(){var e=this;return(0,s.default)(o.default.mark((function t(){var n;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,c.order_empty)();case 2:n=t.sent,1==n.code&&e.order_carListApi();case 4:case"end":return t.stop()}}),t)})))()},goorderAll:function(){var t=e.getStorageSync("option");3!==t&&this.routergo("/pages/order_all/selectstore/selectstore")},getUser:function(){return(0,s.default)(o.default.mark((function t(){var n;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,d.userInfo)();case 2:n=t.sent,1==n.code&&e.setStorageSync("user",n.data);case 4:case"end":return t.stop()}}),t)})))()},Popconfirm:function(){this.popshow=!1,this.addshow?e.setStorageSync("peopleCount",this.peopleCount):e.setStorageSync("peopleCount",this.people),this.order_carListApi()},setadd:function(){this.addshow=!1,this.peopleCur=null},setindex:function(e){this.peopleCur=e,this.peopleCount=e+1,this.addshow=!0,this.people=""},getseat:function(t){var n=this;return(0,s.default)(o.default.mark((function r(){var i;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,c.seat)({id:t});case 2:i=r.sent,1==i.code&&(i.data.order_id>0?(1==firstPay?n.addAdish=!1:n.addAdish=!0,e.setStorageSync("orderId",i.data.order_id),n.popshow=!1):n.addAdish=!1,e.setStorageSync("addAdish",n.addAdish),n.order_carListApi());case 4:case"end":return r.stop()}}),r)})))()},activate:function(t){var n=this;return(0,s.default)(o.default.mark((function r(){var i;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n.components_index=1==t?1:2,e.setStorageSync("option",t),n.activate_data=t,n.store_defaultApi(),r.next=6,(0,c.order_empty)();case 6:i=r.sent,e.showToast({title:i.msg,icon:"none"}),n.order_carListApi();case 9:case"end":return r.stop()}}),r)})))()},specification:function(e){var t=this;return(0,s.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.order_id=e.e,t.order_type=e.type,setTimeout((function(){t.$refs.specification.specification(),t.show_specification=!0}),500);case 3:case"end":return n.stop()}}),n)})))()},aid_mgs:function(e,t){var n;this.childindex=t,this.components_index=t,this.orderlist=[],(n=this.orderlist).push.apply(n,(0,i.default)(e))},swpclick:function(t){console.log(),t&&e.navigateTo({url:t})},getlocation:function(){return(0,s.default)(o.default.mark((function t(){return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getLocation({success:function(t){e.setStorageSync("location",t)}});case 1:case"end":return t.stop()}}),t)})))()},store_defaultApi:function(t){var n=this;return(0,s.default)(o.default.mark((function r(){var i,s;return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return i=e.getStorageSync("shopuser").id,r.next=3,(0,c.store_default)({id:i||""});case 3:s=r.sent,n.store_default_data=s.data,1==s.data.takeaway_switch&&0==s.data.delivery_switch&&(n.activate_data=2),n.list1=s.data.image,n.list1url=s.data.tz_url,1==t&&n.store_infoApi();case 9:case"end":return r.stop()}}),r)})))()},store_collectionApi:function(t){var n=this;return(0,s.default)(o.default.mark((function r(){return o.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.getStorageSync("userinfo")){r.next=6;break}return n.enter=!0,e.showToast({title:"未登录",icon:"none"}),r.abrupt("return");case 6:if(!t){r.next=13;break}return r.next=9,(0,c.store_cancelColl)({store_id:n.store_default_data.id});case 9:r.sent,r.next=17;break;case 13:return r.next=15,(0,c.store_collection)({store_id:n.store_default_data.id});case 15:r.sent;case 17:n.store_defaultApi(),n.order_carListApi();case 19:case"end":return r.stop()}}),r)})))()},store_infoApi:function(){var e=this;return(0,s.default)(o.default.mark((function t(){var n,r;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,c.store_info)({store_id:e.store_default_data.id,shipment:3});case 2:r=t.sent,e.store_infoApi_data=[],(n=e.store_infoApi_data).push.apply(n,(0,i.default)(r.data)),e.orderlist=r.data[0].goods,e.display=!0;case 7:case"end":return t.stop()}}),t)})))()},selective_specification:function(e,t,n,r){var i=this;return(0,s.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:i,i.specification_list.forEach((function(n,o){n.item.forEach((function(n,i){n.id==t?n.is_show?2==r&&(n.is_show=!1):n.is_show=!0:1==r&&o==e&&(n.is_show=!1)}))})),i.style=[],i.specification_list.forEach((function(e){e.item.forEach((function(e,t){e.is_show&&i.style.push(e)}))})),i.store_itemPriceApi(),i.$forceUpdate();case 6:case"end":return n.stop()}}),n)})))()},store_itemPriceApi:function(){var e=this;return(0,s.default)(o.default.mark((function t(){var n,r;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n="",e.style.forEach((function(e){n+=e.id+"_"})),n=n.substring(0,n.length-1),t.next=5,(0,c.store_itemPrice)({goods_id:e.order_id,spu_id:n});case 5:r=t.sent,e.orderprive=a.default.BumberPrecision(r.data.price);case 7:case"end":return t.stop()}}),t)})))()},add_joinCar:function(){var t=this;return(0,s.default)(o.default.mark((function n(){var r,i;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.getStorageSync("userinfo")){n.next=3;break}return t.enter=!0,n.abrupt("return");case 3:return r=[],t.style.forEach((function(e){r.push(e.id)})),n.next=7,(0,c.order_joinCar)({store_id:t.store_default_data.id,goods_id:t.order_id,spu_id:r,count:1,order_type:t.activate_data});case 7:i=n.sent,1==i.code?(e.showToast({title:i.msg,icon:"none"}),t.order_carListApi(),t.show_specification=!1,t.style=[]):e.showToast({title:i.msg,icon:"none"});case 9:case"end":return n.stop()}}),n)})))()},order_carListApi:function(){var t=this;return(0,s.default)(o.default.mark((function n(){var r,i,s,a,u,d,l;return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=e.getStorageSync("userinfo").token,r){n.next=4;break}return t.shopping_trolley_list=[],n.abrupt("return");case 4:if(s=e.getStorageSync("peopleCount")||0,a=e.getStorageSync("shopuser").iscwf,u=e.getStorageSync("firstPay"),d=e.getStorageSync("scene"),l=t.addAdish?2:1,1!=a){n.next=21;break}if(2!=u){n.next=16;break}return n.next=13,(0,c.order_carList)({peopleCount:s,type:l,store_id:t.shopuser.id,seat_id:d});case 13:i=n.sent,n.next=19;break;case 16:return n.next=18,(0,c.order_carList)({peopleCount:s,type:l,store_id:t.shopuser.id,seat_id:d});case 18:i=n.sent;case 19:n.next=24;break;case 21:return n.next=23,(0,c.order_carList)({store_id:t.shopuser.id,seat_id:d});case 23:i=n.sent;case 24:1==i.code?t.shopping_trolley_list=i.data:t.shopping_trolley_list=[];case 25:case"end":return n.stop()}}),n)})))()},register:function(){this.enter=!0},router_close:function(t){e.reLaunch({url:t})},routergo:function(t){e.navigateTo({url:t})},closepage:function(){this.enter=!1},refresherpulling:function(){}}};t.default=l}).call(this,n(2)["default"])},295:function(e,t,n){"use strict";n.r(t);var r=n(296),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},296:function(e,t,n){},297:function(e,t,n){"use strict";n.r(t);var r=n(298),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},298:function(e,t,n){}},[[289,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagesB/merchantOrder/merchantOrder.js.map